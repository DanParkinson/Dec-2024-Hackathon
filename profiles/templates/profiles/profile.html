{% extends "base.html" %}

{% block title %}User Profile{% endblock %}

{% block content %}
<div class="profile-container">
    <h1>Welcome, {{ user.get_full_name|default:user.username }}</h1>
    <p><strong>Email:</strong> {{ user.email|default:"Not provided" }}</p>

    <!-- User created recipes-->
    <h2>My Recipes</h2>
    {% if recipes %}
    <div class="recipe-list">
        {% for recipe in recipes %}
            <div class="recipe-item">
                <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-image">
                <div class="recipe-info">
                    <h3>{{ recipe.title }}</h3>
                    <div class="recipe-actions">
                        <!-- {% url 'edit_recipe' recipe.id %} -->
                        <a href="" class="btn btn-primary">Edit</a> 
                        <!-- {% url 'delete_recipe' recipe.id %} -->
                        <a href="#" class="btn btn-danger">Delete</a>
                    </div>
                    
                </div>
            </div>
        {% endfor %}
    </div>
    {% else %}
        <p>You haven't created any recipes yet.</p>
    {% endif %}

    <!-- Favourite recipes-->
    <h2>My Favourite Recipes</h2>
{% if favourite_recipes %}
    <div class="recipe-grid">
        {% for recipe in favourite_recipes %}
            <div class="recipe-card">
                <a href="{% url 'recipe_detail' recipe.id %}">
                    <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-image">
                    <h3>{{ recipe.title }}</h3>
                </a>
                <!-- Toggle Favourite Button -->
                <form method="POST" action="{% url 'toggle_favourite' recipe.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">
                        {% if user in recipe.favourites.all %}
                            Unfavourite
                        {% else %}
                            Favourite
                        {% endif %}
                    </button>
                </form>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>You haven't favourited any recipes yet.</p>
{% endif %}
</div>
{% endblock %}